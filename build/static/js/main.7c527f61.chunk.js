(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,t,n){e.exports=n(37)},37:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(14),c=n.n(o),u=n(2),s=n(3),i=n.n(s),l="/api/persons",m=function(){return i.a.get(l).then((function(e){return e.data}))},d=function(e){return i.a.post("".concat(l),e).then((function(e){return e.data}))},f=function(e){return i.a.put("".concat(l,"/").concat(e.id),e)},E=function(e){return i.a.delete("".concat(l,"/").concat(e))},b=n(4),p=function(e){var t=e.persons,n=e.setPersons,o=e.setAlertMsg,c=Object(r.useState)(""),s=Object(u.a)(c,2),i=s[0],l=s[1],m=Object(r.useState)(""),E=Object(u.a)(m,2),p=E[0],h=E[1];return a.a.createElement("div",null,a.a.createElement("h3",null,"add a new"),a.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),""===i||""===p)return o({isError:!0,message:"One or more fields empty"}),setTimeout((function(){return o({isError:!1,message:""})}),3e3),null;var r=t.find((function(e){return e.name===i}));void 0!==r?window.confirm("".concat(r.name," is already on the list, replace old number with a new one?"))&&f(Object(b.a)({},r,{number:p})).then((function(){n(t.map((function(e){return e.id===r.id?Object(b.a)({},e,{number:p}):e}))),o({isError:!1,message:"Updated ".concat(i)}),setTimeout((function(){return o({isError:!1,message:""})}),3e3)})).catch((function(e){o({isError:!0,message:"".concat(e)}),setTimeout((function(){return o({isError:!1,message:""})}),3e3)})):d({name:i,number:p,id:Math.random}).then((function(e){n(t.concat(e)),o({isError:!1,message:"Added ".concat(i)}),setTimeout((function(){return o({isError:!1,message:""})}),3e3)})).catch((function(e){o({isError:!0,message:"".concat(e)}),setTimeout((function(){return o({isError:!1,message:""})}),3e3)})),l(""),h("")}},a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:i,onChange:function(e){return l(e.target.value)}})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:p,onChange:function(e){return h(e.target.value)}})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"Add"))))},h=function(e){var t=e.isError,n=e.message;if(void 0===n||""===n)return null;var r=t?"red":"green";return a.a.createElement("div",{style:function(e){return{borderRadius:10,backgroundColor:"#b3bab5",border:"3px solid",borderColor:e,color:e}}(r)},a.a.createElement("p",null,n))},g=function(e){var t=e.persons,n=e.setPersons,r=e.searchPersonField,o=e.setAlertMsg;return""===r?a.a.createElement("div",null,t.map((function(e,r){return a.a.createElement("p",{key:r},e.name," ",e.number,a.a.createElement("button",{onClick:function(){return r=e.name,a=e.id,void(window.confirm("Tem certeza que deseja deletar ".concat(r," da lista?"))&&E(a).then((function(){n(t.filter((function(e){return e.id!==a}))),o({isError:!1,message:"Deleted ".concat(r)}),setTimeout((function(){return o({isError:!1,message:""})}),3e3)})).catch((function(e){o({isError:!0,message:"".concat(e)}),setTimeout((function(){return o({isError:!1,message:""})}),3e3)})));var r,a}},"Delete"))}))):a.a.createElement("div",null,t.filter((function(e){return e.name.toLowerCase().includes(r.toLowerCase())})).map((function(e,t){return a.a.createElement("p",{key:t},e.name," ",e.number,a.a.createElement("button",null,"Delete"))})))},v=function(e){var t=e.searchPersonField,n=e.handleSearch;return a.a.createElement("div",null,"filter shown with ",a.a.createElement("input",{value:t,onChange:n}))},P=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),n=t[0],o=t[1],c=Object(r.useState)(""),s=Object(u.a)(c,2),i=s[0],l=s[1],d=Object(r.useState)({isError:!1,message:""}),f=Object(u.a)(d,2),E=f[0],b=f[1];Object(r.useEffect)((function(){m().then((function(e){return o(e)}))}),[]);var P={formProps:{persons:n,setPersons:o,setAlertMsg:b},searchProps:{searchPersonField:i,handleSearch:function(e){return l(e.target.value)}},resultsProps:{persons:n,setPersons:o,searchPersonField:i,setAlertMsg:b}};return a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(h,E),a.a.createElement(v,P.searchProps),a.a.createElement(p,P.formProps),a.a.createElement("h2",null,"Numbers"),a.a.createElement(g,P.resultsProps))};c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(P,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.7c527f61.chunk.js.map